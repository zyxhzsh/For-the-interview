[多态中成员变量的使用规则](#多态中成员变量的使用规则)

[多态中成员方法的使用规则](#多态中成员方法的使用规则)

[对象的向上转型](#对象的向上转型)

[对象的向下转型](#对象的向下转型)

[instanceof](#instanceof)

[笔记本USB接口案例](#笔记本USB接口案例)

### 多态

父类引用指向子类对象。

左父右子就叫多态，右侧子类对象被当做父类进行使用。

**多态的好处**：代码统一。无论右边new的时候换成哪个子类的对象，等号左边调用方法都不会变化。

格式：

父类名称 对象名 = new 子类名称();

或者：

接口名称 对象名 = new 实现类名称();

### 多态中成员变量的使用规则

访问成员变量的两种方式：

1. 直接通过对象名称访问成员变量：看等号左边是谁，就优先用谁的成员变量，没有则向上找。

2. 间接通过成员方法访问成员变量：看该方法属于谁，就优先用谁的成员变量，没有则向上找。

成员变量的口诀：编译看左边，运行还看左边。

### 多态中成员方法的使用规则

创建的对象是哪个类，就优先用哪个类的方法，如果没有就向上找。

成员方法的口诀：编译看左边，运行看右边。

**Ex**

父类
```java
public class Fu {
    public void method(){
        System.out.println("父类方法");
    }

    public void methodFu(){
        System.out.println("只有父类有的方法");
    }
}
```
子类
```java
public class Zi extends Fu{
    public void method(){
        System.out.println("子类方法");
    }
    
    public void methodZi(){
        System.out.println("子类独有方法");
    }
    
}
```
main方法
```java
public class Demo01Multi {
    public static void main(String[] args) {
        //左侧父类的引用，指向了右侧子类的对象
        Fu obj = new Zi();
        obj.method();//父子都有，创建的对象是子类，优先用子。
        obj.methodFu();//子类没有，父类有，创建的对象是子类，向上找到父类。
        obj.methodZi();//编译看左边，左边是父，父类没有methodZi方法，所以编译报错。
    }
}
```

### 对象的向上转型

对象的向上转型就是指多态写法。右侧创建一个子类对象，把它当做父类来看待使用。

格式：
```
父类名称 对象名 = new 子类名称();
接口名称 对象名 = new 实现类名称();
```
向上转型一定是安全的。从小范围转向了大范围。

### 对象的向下转型

向上转型一定是安全的，但是有一个弊端：对象一旦向上转型为父类，那么就无法调用子类原本特有的方法。

解决方案：用对象的向下转型来还原。

对象的向下转型其实是一个还原动作：将父类对象还原成本来的子类对象。如果不是还原成本来的子类对象，编译不会报错，但运行会。产生ClassCastException异常。

格式：
```
子类名称 对象名 = (子类名称) 父类对象：
```

**Ex**：
```java
Animal animals = new Cat();
```
Animal有eat方法，它的子类Cat重写了eat方法。Cat还有独有的catchMouse方法，但动物并不是都有catchMouse方法，对象调用catchMouse方法编译无法通过。需要向下转型：
```java
Animal animals = new Cat();
Cat cat = (Cat) Animal;
cat.catchMouse();
//必须保证对象本来的创建的时候就是猫，才能向下转型成为猫。否则会报错。
```
错误的向下转型，编译不会报错，但运行会，产生ClassCastException异常：
```
Animal animal = new Cat();
Dog dog = (Dog) animal;
dog.bark();
```
### instanceof

如何才能知道一个父类的引用对象，本来是什么子类。

格式：
```
对象名 instanceof 类名
```
instanceof 是 Java 的保留关键字，它的作用是判断它左边的对象是否是它右边的类的实例，返回boolean类型。

**Ex**

来什么动物都可以，但是已经得到一个动物了，就得物尽其用。猫就抓老鼠，狗就看家。由参数不知道传的是什么动物，想向下转型，必须先判断是什么动物。

```java
public static void giveMeAPet(Animal animal){
        if(animal instanceof Dog){
            Dog dog = (Dog) animal;
            dog.WatchHouse();
        }
        if(animal instanceof Cat){
           Cat cat = (Cat) animal;
           cat.catchMouse();
        }
}
```
### 笔记本USB接口案例

定义笔记本类，实现笔记本使用USB鼠标、USB键盘

笔记本类，包含运行功能、关机功能、使用USB设备功能 鼠标类，要实现USB接口，并具备点击的方法

USB接口，包含开启功能、关闭功能

鼠标类，要实现USB接口，并具备点击的方法

键盘类，要实现USB接口，具备敲击的方法

[代码](https://github.com/GrowTowardsSunlight/For-the-interview/blob/master/java/案例.md#笔记本USB接口案例)
